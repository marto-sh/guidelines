# Configuration for Clippy lints
# See https://rust-lang.github.io/rust-clippy/master/index.html for details

# Deny all warnings by default, and allow specific ones
# This forces us to address all lints, ensuring high code quality.
# Exceptions can be made with good justification using `#[allow(clippy::lint_name)]`
warn(clippy::all)
warn(clippy::pedantic)
warn(clippy::nursery)
warn(clippy::cargo)

# == Specific lint settings ==

# --- Style and Readability ---
allow(clippy::implicit_return) # Sometimes explicit return is clearer, sometimes not. Let developer decide.
allow(clippy::module_name_repetitions) # Often natural module names repeat, e.g., `user::User`.
allow(clippy::redundant_pub_arg) # Can be noisy, especially with macro expansion.
allow(clippy::missing_errors_doc) # Often too verbose for internal errors. Public APIs should still document.
allow(clippy::missing_panics_doc) # Similar to errors, panics are usually for unrecoverable states.
allow(clippy::too_many_lines) # Lines are subjective, focus on logical complexity.
allow(clippy::wildcard_imports) # Can be useful for prelude patterns or internal modules.

# --- Performance and Efficiency ---
allow(clippy::cast_possible_truncation) # Can be noisy, especially in embedded or FFI contexts. Careful use is fine.
allow(clippy::cast_sign_loss) # Similar to truncation, sometimes necessary.
allow(clippy::unsafe_derive_deserialize) # Often too strict, rely on serde's safety.
allow(clippy::default_trait_access) # Often improves readability, no strong reason to deny.
allow(clippy::must_use_candidate) # Can be noisy for internal helper functions.

# --- Correctness ---
allow(clippy::unwrap_used) # Use of `unwrap` is acceptable in tests, examples, or when correctness is guaranteed by logic.
                            # For fallible operations, prefer `?` or `expect` with a good message.
allow(clippy::expect_used)  # Similar to `unwrap_used`, acceptable with good messages for guaranteed correctness.
allow(clippy::indexing_slicing) # Often necessary for performance or specific data structures.
allow(clippy::float_cmp) # Floating point comparisons are tricky; sometimes direct comparison is intended.
allow(clippy::enum_glob_use) # Can improve readability for enums with many variants.

# --- Maintainability ---
allow(clippy::large_enum_variant) # Can indicate design issues, but sometimes necessary for complex enums.
                                  # Consider boxing large variants if memory is a concern.
allow(clippy::cognitive_complexity) # Focus on logical complexity per function, not just line count.
                                  # Use judgement to refactor truly complex functions.

# --- Naming Conventions ---
# Enforced by clippy::pedantic and clippy::nursery, specific allowances below
allow(clippy::snake_case) # Sometimes external APIs or data structures enforce different casing.
allow(clippy::upper_case_acronyms) # Common for abbreviations like "JWT", "URL", "ID".
